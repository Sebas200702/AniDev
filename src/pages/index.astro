---
import Layout from '@layouts/base.astro'

import { HomeSectionsContainer } from '@shared/components/home-sections-container'
import { HomeController } from '@shared/controllers/home-controller'
import { getSessionUserInfo } from '@utils/get_session_user_info'

// Obtener informaci√≥n del usuario desde cookies
const userInfo = await getSessionUserInfo({
  request: Astro.request,
  cookies: Astro.cookies,
})

const { data } = await HomeController.getHomeFeed(userInfo?.id || null)
---

<Layout>
  <HomeSectionsContainer
    initialSections={data}

    cacheMaxAgeHours={1}
    client:load
  />
</Layout>
